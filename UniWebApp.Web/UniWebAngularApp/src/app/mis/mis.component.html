<header>
  <h2>Management Information System</h2>
  <p style="margin-top: 5px">This sample application shows how to deal with always changing information needs.</p>
</header>
<div fxLayout="column" class="content-container">

  <div fxLayout="row" class="search-bar-container">
    <form #searchForm="ngForm" class="search-form">
      <mat-form-field class="full-width-form-field">
        <mat-icon matPrefix style="margin-right: 5px">search</mat-icon>
        <input matInput placeholder="Search">
        <mat-hint align="start">How to: [FieldName]:[FieldValue] Example: Nome:Diogo Daniel Silva Matos</mat-hint>
      </mat-form-field>
    </form>
  </div>

  <div fxLayout="column" fxLayoutAlign="strech" class="entity-list-container">
    <div fxLayout="column" fxLayoutAlign="center center" class="spinner-container">
      <mat-spinner *ngIf="isBusy" color="accent"></mat-spinner>
    </div>
    <mat-action-list class="entity-list">
      <mat-list-item *ngFor="let entity of appEntities; let i = index" [attr.data-index]="i" [ngClass]="{zeroMargin: i === 0 || i === (appEntities.length - 1), selected: entity == selectedEntity}" class="entity" (click)="selectEntity(entity)">
        <div fxLayout="column" class="type-title-container">
          <p class="type-name">{{ entity.typeName }}</p>
        </div>
        <div class="fields-container">
          <p>{{ entity.fields[0].name }}</p>
          <h3>{{ entity.fields[0].textValue }}</h3>
        </div>
      </mat-list-item>
    </mat-action-list>
  </div>

  <div fxLayout="column" class="selected-entity-container">
    <div *ngIf="selectedEntity != null" fxLayout="row" class="selected-entity-container-inner">
      <div fxLayout="row wrap" fxFlex="70" class="entity-fields-container">
        <div fxLayout="row" fxFlex="100">
          <mat-button-toggle-group fxFlex="20" fxLayout="column" #selectedSection="matButtonToggleGroup" [value]="selectedEntitySelectedSection" (change)="onSelectedSectionChange(selectedSection.value)">
            <mat-button-toggle *ngFor="let section of selectedEntitySections" [value]="section">{{section}}</mat-button-toggle>
          </mat-button-toggle-group>

          <form fxFlex="80" #fieldsForm="ngForm" class="fields-form">
            <div *ngFor="let field of selectedEntityFields; let i = index" [ngSwitch]="field.fieldType" class="field-input-container">

              <mat-form-field hideRequiredMarker="true" *ngSwitchCase="0" [ngClass]="{zeroMargin: i === (selectedEntityFields.length - 1)}">
                <input matInput [name]="field.name" [(ngModel)]="field.textValue" required minlength="2" maxlength="255" [placeholder]="field.name" [disabled]="fieldsDisabled">
                <mat-hint align="end">{{field.textValue.length}} / 256</mat-hint>
              </mat-form-field>

              <mat-form-field hideRequiredMarker="true" *ngSwitchCase="3" [ngClass]="{zeroMargin: i === (selectedEntityFields.length - 1)}">
                  <mat-select [name]="field.name" [(ngModel)]="field.comboboxSelected" [placeholder]="field.name" required [disabled]="fieldsDisabled">
                    <mat-option *ngFor="let option of field.comboboxOptions" [value]="field.comboboxOptions.indexOf(option)">
                      {{option}}
                    </mat-option>
                  </mat-select>
              </mat-form-field>

              <mat-form-field hideRequiredMarker="true">
                <input matInput [name]="field.name" [value]="field.dateValue" [matDatepicker]="picker" placeholder="Choose a date">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>

            </div>

            <button (click)="hitButton()">HIT</button>

          </form>

        </div>
      </div>
      <div class="entity-relations-container">B</div>
    </div>
  </div>

</div>
